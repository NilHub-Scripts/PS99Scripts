-- Load Rayfield Library
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- Wait for PlayerGui to be ready
local Players = game:GetService("Players")
local plr = Players.LocalPlayer
repeat wait() until plr:FindFirstChild("PlayerGui")

-- Setup number animation and formatting
local function formatAbbreviated(n)
	if n >= 1e9 then
		return string.format("%.1fb", n / 1e9)
	elseif n >= 1e6 then
		return string.format("%.1fm", n / 1e6)
	elseif n >= 1e3 then
		return string.format("%.1fk", n / 1e3)
	else
		return tostring(n)
	end
end

local function animateCount(startValue, endValue, label)
	local steps = 50
	local diff = endValue - startValue
	for i = 1, steps do
		local intermediate = math.floor(startValue + (diff * (i / steps)))
		label.Text = formatAbbreviated(intermediate)
		task.wait(0.02)
	end
	label.Text = formatAbbreviated(endValue)
end

-- Create Rayfield Window AFTER it loads
local Window = Rayfield:CreateWindow({
	Name = "Nil Scripts || Pet Simulator 99 🐶",
	LoadingTitle = "Nil Scripts",
	LoadingSubtitle = "Injecting gems...",
	ConfigurationSaving = {
		Enabled = false,
	},
	Discord = {
		Enabled = false,
	},
	KeySystem = false,
})

-- Create tabs
local MainTab = Window:CreateTab("Main", 4483362458)
local GemsTab = Window:CreateTab("Gems Generator", 4483362458)

-- Gems Generator Input
local gemAmount = 0
GemsTab:CreateInput({
	Name = "Enter Gem Amount",
	PlaceholderText = "e.g. 999999",
	RemoveTextAfterFocusLost = false,
	Callback = function(Text)
		local num = tonumber(Text)
		if num then
			gemAmount = num
		end
	end,
})

-- Generate Button
GemsTab:CreateButton({
	Name = "Generate Gems",
	Callback = function()
		local success, amountLabel = pcall(function()
			return plr.PlayerGui
				:WaitForChild("MainLeft")
				:WaitForChild("Left")
				:WaitForChild("Currency")
				:WaitForChild("Diamonds")
				:WaitForChild("Diamonds")
				:WaitForChild("Amount")
		end)

		if success and amountLabel then
			local currentText = amountLabel.Text:gsub(",", ""):lower()
			local current = tonumber(currentText:match("%d+")) or 0
			if gemAmount > 0 then
				animateCount(current, gemAmount, amountLabel)
			end
		else
			Rayfield:Notify({
				Title = "Error!",
				Content = "Couldn't find the Diamonds GUI!",
				Duration = 5,
			})
		end
	end,
})
